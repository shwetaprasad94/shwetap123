<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>07formValidation.html</title>
<style>
  .required { background: red; }
  .hide { display: none; }
</style>
</head>

<body>
<h1>jQuery</h1>
<h2>Form Validation</h2>

<h3>Goal</h3>
<p>Prevent a user from submitting using client-side code.</p>

<h3>Technologies</h3>
<ol>
  <li>jQuery</li>
  <li>JavaScript</li>
  <li>CSS</li>
  <li>HTML</li>
</ol>

<h3>Live demo</h3>
<form action="http://www.vanarts.com/" id="contact-form">
  <div class="required">
    <label>
      Email <input type="text" id="email">
      <i class="hide">sample@domain.ca</i>
    </label>
  </div>
  <div>
    <label>
      Location <input type="text" id="location">
      <i class="hide">Postal code/Zip code</i>
    </label>
  </div>
  <div>
    <label>
      Phone <input type="text" id="phone" data-required="true">
      <i class="hide">Mobile telephone number</i>
    </label>
  </div>

  <input type="submit" value="Are my fields valid?">
</form>

<!-- Attach jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<!-- Page specific code -->
<script>
  function hideInstruction() {
    var $field = $(this);
    $field.next().addClass('hide');
  }
  function showInstruction() {
    var $field = $(this);
    $field.next().removeClass('hide');
  }
  function attachFormEvents($form) {
    $form.find('input[type=text]').blur(hideInstruction).focus(showInstruction);
  }
  function isBlank(fieldId) {
    return (document.getElementById(fieldId).value.trim() === '');
  }
  function processForm(event) {
    var validationRules = {
      email: {
        rules: ['blank', 'email'],
      },
      phone: {
        rules: ['blank'],
      },
    };

    var fieldIds = Object.keys(validationRules);
    fieldIds.forEach(function (fieldId) {
      var rules = validationRules[fieldId].rules;

      rules.forEach(function (rule) {
        if (rule === 'blank' && isBlank(fieldId)) {
          event.preventDefault();
        }
      });
    });
  }
  $('#contact-form').submit(processForm);
  attachFormEvents($('#contact-form'));
</script>
</body>
</html>
