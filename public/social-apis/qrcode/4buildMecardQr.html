<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Build Mecard as QR Code</title>
	<style>
		label { width: 15%; display: inline-block; }
		#mecard { width: 100%; height: 6em; }
	</style>
</head>

<body>
<h1>QR Code</h1>
<h2>Visualize MeCard</h2>

<h3>MeCard format</h3>
<p>Is similar to the vCard contact standard, but is less verbose due to the simple datum structure.</p>
<pre>MECARD:
N:Last,First;
NOTE:Occupation title;
TEL:16041234567;
EMAIL:email@address.ca;
URL:http://www.website.com;;</pre>

<h3>Goal</h3>
<p>As a user, I want a QR code storing a MeCard.</p>
<p>As a dev, get these fields from a HTML form: first &amp; last name, job title, and web address. On submit display the captured data as a QR Code that visualizes the MeCard format.</p>

<h3>Technologies</h3>
<ul>
	<li>Google Infographic API</li>
	<li>jQuery</li>
	<li>JavaScript</li>
	<li>HTML</li>
</ul>

<h3>Live demo</h3>

<form action="http://vanarts.com">
	<div><label for="fname">First name</label><input type="text" id="fname" name="fname"></div>
	<div><label for="lname">Last name</label><input type="text" id="lname" name="lname"></div>
	<div><label for="title">Job title</label><input type="text" id="title" name="title"></div>
	<div><label for="url">Web Address</label><input type="text" id="url" name="url"></div>

	<div><input type="submit" value="Generate QR Code"></div>
	<div><img id="qr_code"></div>
</form>

<!-- Attach jQuery library -->
<script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
<!-- Page specific code -->
<script>
	$('form').on('submit', function (event) {
		var fname = $('#fname').val(),
			lname = $('#lname').val(),
			title = $('#title').val(),
			url = $('#url').val(),
			mecard = ["MECARD:"],
			apiEndpoint = 'https://chart.googleapis.com/chart',
			apiArgs = '?cht=qr&chs=300x300&chl=';

		mecard.push('N:', lname, ',', fname, ';');
		mecard.push('NOTE:', title, ';');
		mecard.push('URL:', url, ';');
		mecard.push(';'); // close MeCard

		$('#qr_code').attr('src', apiEndpoint + apiArgs + mecard.join(''));

		event.preventDefault(); // cancel form action
	});
</script>
</body>
</html>
